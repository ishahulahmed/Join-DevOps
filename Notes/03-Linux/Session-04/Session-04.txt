Recap
----------

pwd, cd, clear, history
ls
cat
cp mv
cut awk
curl wget
vim
chmod
grep
head
tail
touch

command-name <options> <inputs>
-l, --list (either use -l or --list) (if sigle charachter as option then use one hypen. if more than one charachter as option then use double hypen)
-a, --all  (either use -a or --all) (if sigle charachter as option use one hypen. if more than one charachter as option then use double hypen)
here -l, --list, -a, --all are options

cp command will not work without inputs
for few commands inputs is mandatory for few not mandatory like ls command.

User management
--------------------
if there is a server and multiple users need to access it then  
we need to create multiple user accounts
employees will join teams and exit teams that's a continous process. instead of creating permissions separately for each user.
we create groups/teams we add users to the group...
only administrative team will have root access to server others will login as normal users.

useradd <user-name>

useradd ramesh
useradd: Permission denied. (normal user cannot add another user they should have admin access i.e root access)

sudo su (su is super-user) (if you use sudo su then it will be in folder where used sudo su command)
if you were in /tmp folder then if you use sudo su then it will land in the same folder
pwd
/home/ec2-user or /tmp wherever you were there at the time of usings
with root access if you type cd and enter it's default location is /root


sudo su - (if you use sudo su - then it's landing location will be /root and when you exit this mode it will go back to the folder where you were)
pwd
/root


/root --> landing location of root user. (if you use sudo su -)
sudo su -

with root access you can create user
useradd ramesh

id <user-name> --> userid, user-name

id ramesh (to check whether a user is added or not(=)
uid=1002(ramesh) gid=1002(ramesh) groups=1002(ramesh)


in linux, when you create user, by default a group will be created with same user-name

/etc/passwd --> will have users info
cat /etc/passwd --> will show you all the users list in that specific server.

getent group --> will have group info (here group only not group name) (no need cat just type getend group)

i have created a user ramesh but to give his password

passwd <user-name>
passwd ramesh
it will prompt for new password and re-type password then it will update it successfully
passwd ramesh
passwd: Only root can specify a user name. (root access need to update or add password)
username should not be in password it is a recommendation not a rule.

here, we have added a user and given a password to him. how can this user login?
till now we have used key based authentication, pub and private key

if you want to change this behaviour 
/etc/ssh/sshd_config --> SSH configuration (this is SSH configuration file)

vim /etc/ssh/sshd_config
PasswordAuthentication yes (no users can login to server using password)

sshd -t (To check if there is any error in sshd configuration file)
(use this command from any where sshd -t not only in /etc/ssh/) (if no error it will not show anything)

if i wrote wantedly fdfh like something in sshd_config file then type sshd -t you will get error
/etc/ssh/sshd_confg: line 63: Bad configuration option: fdfhPasswordAuthentication
/etc/ssh/sshd_confg: terminating, 1 bad configuration options

if you made any changes in sshd file then check once with sshd -t command before logging out to the server. if there is bad configuration you cannot login again due to bad configuration. if it is only password based no other alternative.

if you made any changes then you need to restart that particular service. here sshd service.
systemctl restart sshd

now admin will inform ramesh. his user is created and send him ip-address and username and password. 
now ramesh will take gitbash since it not key based. he will login with password
ssh ramesh@3.89.28.201
ramesh@3.89.28.201's password: input-password
your successfully login.
[ ramesh@ip-172-31-37-108 ~ ]$ pwd
/home/ramesh

he is in his home folder /home/ramesh

id ramesh
uid=1002(ramesh) gid=1002(ramesh) groups=1002(ramesh)

linux will have two groups
gid=1002(ramesh) --> primary group
groups=1002(ramesh) --> secondary or supplementary group

i want to create a group devops
groupadd devops

getent group (you can see list of groups)

I want to add ramesh to devops group..

usermod -g devops ramesh -> adding ramesh to devops group as primary (-g is for primary group)

id ramesh
uid=1002(ramesh) gid=1003(devops) groups=1003(devops)


linux should have only 1 primary group, can have multiple secondary groups

for example i want to give ramesh temporarily access to testing team, he has to do some testing related activities.
there will be a group called testing...

groupadd testing (here we are create a group called testing. since it is not there in our server)

usermod -aG testing ramesh (-a for append. G for Secondary group) (adding ramesh to testing group temporarily)

id ramesh
uid=1002(ramesh) gid=1003(devops) groups=1003(devops),1004(testing) (here testing also added as secondary group)

now, ramesh had done his testing related activities
gpasswd -d ramesh testing --> deleting ramesh user from testing group..

id ramesh
uid=1002(ramesh) gid=1003(devops) groups=1003(devops) (testing group removed)


you can't remove primary group of linux user, you can only change/modify

when you create a user his username only be his primary-group and secondary-group
when you change primary group his secondary group will also be same.

usermod -g testing ramesh

id ramesh
uid=1002(ramesh) gid=1004(testing) groups=1004(testing)

now, if you try to remove ramesh from testing secondary group

gpasswd -d ramesh testing
Removing user ramesh from group testing
gpasswd: user 'ramesh' is not a member of 'testing'

id ramesh
uid=1002(ramesh) gid=1004(testing) groups=1004(testing)

until testing is there a primary group you cannot remove secondary group testing as well. you can add other secondary groups and remove them but not this secondary group which is also a primary.


create user --> useradd 
read user --> id or cat /etc/passwd
modify user --> usermod -g or -aG <group-name> <user-name>
delete user

when employee leaving organisation
----------------------------------
delete the user

1. remove user from group
2. delete the user

ramesh --> testing
userdel ramesh --> ramesh will be removed? what about ramesh group created by default.

1. remove all his secondary groups
2. change primary group to his own group.
3. then delete the user

if a new user have to login with his private key?
-----------------------------------------------
robert user with key based authentication

ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDK9Ox5SMXHCSSf9K8pyoRmeOsYxk5y6TA2Agqn2yI4gjURxdiKYXNA21S7K+tLA3hMtBoqldT9o4FWYgZpLVxOQ8KyLXO/6TAZZcKSI3fVNaz40vaPHl84eILnbsaTZK0Sx7SrdcIpTCrccsDdfvHTu/cqD+MEhhZh0Ea0twUR9RFah7wKYNsAo7ev/bNFQD1TMt20DB9So0oyt04nMRMT0xZ+Dgs0QDhRHu+fZF4wQRPexYrKw2XMhjst0Hwicxa9DZNnJwUAsYVnEQzVsoSV+aSmmaAmRLk0ZfHLy+1RZ7/bSn3ukznXVBon2Kkrhly+twkdisrNcr8/49icT6laXyCROwMui6zKTZeo5n0ce7J46zNAsyo7nUs9wCNdnUPmkCEtb5l6G6Kh6PFu09lPDFF8wP/L/RL7kDx6sjO1yfB0hVqlxtkCJ+QreWbwqqTAJ9y5yTb76EuApmkVIWVEjvMiJ5+uMEMVRZgy0zDKCudrYSvCh39gmihm1AsswBC0I60+DD7gPZZbxmQqUzfFNLRbuEkWE5aUZTSe/HOS6UikD5mJHeBUglzX4v5WmwpHZZv4g/mEQ85QFWDgS8fVYRZ1RSt6uhiuo7gRQpjzyv0Zt1+LRzSCCDKNqwIsbgr4/SDpnlOoErIgl4PDN/TV/yKhtFnJvZ331QoiOpc1SQ== user@AshDexter-T480


mkdir .ssh
authorized_keys

R 4
W 2 
X 1

chown <user>:<group>

chown -R rober:robert .ssh

package management
----------------------
in linux, one package may be depends on another package. olden days we have rpm

rpm we have to manually get the dependencies, install them and finally main package..

yum --> automatic dependencies management

yum install git -y

/etc/yum.repos.d --> location of package URL's

yum list installed --> installed packages
yum list all --> all packages for this linux server
available = all - installed

cat /proc/cpuinfo
cat /proc/meminfo
cat /etc/os-release --> cat /etc/*release
yum update

service management
---------------------
0-65,535 ports = 65,536

SSH 22

ssh -i <private-key> user@ip

IP address, server will check is there any service running on port 22. then it will forward request to ssh

ssh servie will check credentials, if success login

Delhi --> Mumbai

if flat no, letter will stuck at security

systemctl start nginx
systemctl status nginx
systemctl stop nginx
systemctl restart nginx
systemctl enable nginx

enable --> if a service is enabled, even after restarting the server that service automatically start...

process management, network management, linux folder structure

DNS
facebook.com --> 11.45.67.89

https://facebook.com:567

26:58